## 1. В чем разница между GROUP BY и HAVING?

- **GROUP BY** — группирует строки по значениям указанных столбцов. После группировки можно применять агрегатные функции (SUM, COUNT, AVG, MAX, MIN) к каждой группе.
    - Пример: посчитать сумму заказов по каждому клиенту.
- **HAVING** — фильтрует группы, уже сформированные оператором GROUP BY, по условиям, которые могут включать агрегатные функции.
    - Пример: выбрать только тех клиентов, у которых сумма заказов больше 1000.
        

**Главное отличие:**
- `WHERE` фильтрует отдельные строки до группировки.
- `HAVING` фильтрует уже сформированные группы после применения агрегатных функций.

```sql
SELECT customer_id, SUM(amount) AS total
FROM orders
WHERE status = 'completed'       -- фильтрация строк ДО группировки
GROUP BY customer_id
HAVING SUM(amount) > 1000;       -- фильтрация групп ПОСЛЕ агрегирования

```

## 2. В каком порядке работают WHERE, GROUP BY, HAVING?

Порядок выполнения операторов в SQL (упрощённо):
1. **FROM** — выбирает таблицу/источник данных.
2. **WHERE** — фильтрует строки по условиям (до любых агрегатных функций).
3. **GROUP BY** — группирует оставшиеся строки по указанным столбцам.
4. **Агрегация** — вычисляются функции SUM, COUNT и т.д. для каждой группы.
5. **HAVING** — фильтрует группы по условиям (можно использовать агрегатные функции).
6. **SELECT** — формирует итоговый результат.
7. **ORDER BY** — сортирует результат.