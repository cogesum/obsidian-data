## 1. Что такое брокер сообщений? Какую роль он играет в распределённых системах?

**Брокер сообщений** — это специализированное программное обеспечение (или сервис), которое обеспечивает обмен сообщениями между различными компонентами распределённой системы. Он выступает посредником между отправителем (producer/publisher) и получателем (consumer/subscriber), обеспечивая надёжную, асинхронную и зачастую гарантированную доставку сообщений.
**Роль брокера в распределённых системах:**
- Обеспечивает слабую связанность между сервисами: отправитель и получатель не обязаны знать о существовании друг друга.
- Позволяет строить асинхронные, масштабируемые и отказоустойчивые архитектуры.
- Сглаживает пики нагрузки, временно буферизуя сообщения.

## 2. В чем разница между брокером сообщений и классической очередью сообщений (MQ)?
- **Классическая очередь сообщений (Message Queue, MQ):**
    - Обычно реализует паттерн point-to-point: один producer, один consumer.
    - Сообщения читаются и удаляются из очереди по принципу FIFO.        
    - Пример: RabbitMQ в режиме очереди, Amazon SQS.
- **Брокер сообщений:**
    - Часто поддерживает не только очереди, но и топики (pub/sub), маршрутизацию, трансформацию сообщений.
    - Может обслуживать несколько подписчиков на одно сообщение (multicast).
    - Предоставляет расширенные возможности: маршрутизация, фильтрация, трансформация, гарантии доставки.
    - Примеры: Apache Kafka, RabbitMQ (в режиме обменника), NATS.

## 3. Основные функции брокера сообщений

- **Маршрутизация сообщений:** направление сообщений нужным получателям на основе правил, топиков или ключей маршрутизации.
- **Буферизация:** временное хранение сообщений до их обработки потребителями.
- **Гарантии доставки:** поддержка различных моделей доставки (at most once, at least once, exactly once).
- **Трансформация сообщений:** преобразование формата или структуры сообщений при необходимости.
- **Фильтрация:** доставка только релевантных сообщений определённым подписчикам.
- **Мониторинг и аудит:** отслеживание статуса доставки, логирование, метрики.
- **Обеспечение порядка сообщений:** поддержка последовательности доставки при необходимости.
## Преимущества использования брокеров сообщений в микросервисной архитектуре

- **Слабое связывание компонентов:** сервисы могут взаимодействовать, не зная напрямую друг о друге.
- **Асинхронность:** отправитель не блокируется в ожидании ответа, что повышает производительность и отзывчивость системы.
- **Масштабируемость:** легко добавлять новых потребителей или производителей без изменения логики существующих сервисов.
- **Отказоустойчивость:** сообщения не теряются при сбоях отдельных сервисов, а временно хранятся в брокере.
- **Гибкость интеграции:** поддержка различных паттернов взаимодействия (очереди, pub/sub, fan-out).
- **Мониторин**