## 1. Разница между очередями (queue) и топиками (topic)
- **Очередь**: каждое сообщение доставляется только одному потребителю, что удобно для распределения задач между воркерами.
- **Топик**: каждое сообщение получают все подписчики, что полезно для событийных и нотификационных сценариев.

## 2. Паттерны обмена сообщениями

- **Point-to-Point**:
    - Сообщение отправляется в очередь, откуда его забирает один из потребителей.
    - Используется для задач, которые должен обработать только один сервис.
- **Publish/Subscribe (Pub/Sub)**:
    - Сообщения публикуются в топик, и каждый подписчик получает свою копию.
    - Подходит для событийной архитектуры, логирования, уведомлений.
- **Fan-out**:
    - Сообщение отправляется сразу нескольким очередям или подписчикам.
    - Пример: exchange типа fanout в RabbitMQ рассылает каждое сообщение всем связанным очередям.
- **Request-Reply**:
    - Producer отправляет запрос и ожидает ответ от consumer через отдельный канал.

## 3. Масштабируемость и отказоустойчивость брокера сообщений

- **Масштабируемость**:
    - **Горизонтальное масштабирование**: запуск нескольких экземпляров брокера и распределение нагрузки между ними.
    - **Партиционирование** (partitioning): разбивка топика или очереди на разделы (partitions), которые обрабатываются независимо.
    - **Балансировка нагрузки**: автоматическое распределение сообщений между потребителями.
        
- **Отказоустойчивость**:
    - **Репликация**: хранение копий данных на нескольких узлах для защиты от потери информации.
    - **Автоматическое восстановление**: при сбое одного узла его задачи берут на себя другие.
    - **Мониторинг и алертинг**: отслеживание состояния брокера и автоматическое реагирование на сбои.
    - 
- ## 4. Обеспечение порядка сообщений (message ordering)

- **Партиционирование с гарантией порядка**: сообщения с одинаковым ключом (partition key) всегда попадают в один и тот же partition, где сохраняется порядок.
- **Очереди с одним consumer**: если из очереди читает только один потребитель, порядок сохраняется.
- **Группы потребителей**: в Kafka сообщения внутри partition поступают потребителям в порядке отправки.
- **Использование sequence numbers**: для контроля и восстановления порядка на стороне потребителя.
## 5. Dead Letter Queue (DLQ)

**Dead Letter Queue (DLQ)** — это специальная очередь для сообщений, которые не удалось обработать после нескольких попыток.
- **Зачем нужна DLQ:**
    - Позволяет не терять "проблемные" сообщения, а анализировать и обрабатывать их отдельно.
    - Предотвращает блокировку основной очереди из-за некорректных или "ядовитых" сообщений.
    - Упрощает мониторинг и отладку ошибок в системе.